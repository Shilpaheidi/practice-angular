<form [formGroup]="profileForm" (ngSubmit)="submitProfileForm()">
  <div formArrayName="sections">
    <div
      *ngFor="let section of sections.controls; let i = index"
      [formGroupName]="i"
    >
      <div>
        <label for="name">Name</label>
        <input id="name" formControlName="name" placeholder="Enter name" />
        <span
          *ngIf="section.get('name')?.invalid && section.get('name')?.touched"
          >Name is required</span
        >
      </div>

      <div>
        <label for="email">Email</label>
        <input id="email" formControlName="email" placeholder="Enter email" />
        <span *ngIf="section.get('email')?.invalid && section.get('email')?.touched">Valid email is required</span>
      </div>



      <div>
        <label for="address">Address</label>
        <input id="address" formControlName="address" placeholder="Enter address" />
      </div>

      <div>
        <label>Preferences</label>
        <div formGroupName="preferences">
          <div>
            <input type="checkbox" formControlName="newsletter" />
            <label for="newsletter">Subscribe to newsletter</label>
          </div>
          <div>
            <input type="checkbox" formControlName="notifications" />
            <label for="notifications">Receive notifications</label>
          </div>
        </div>
      </div>
      <button type="button" (click)="removeSection(i)">Remove Section</button>
    </div>
  </div>

  <button type="button" (click)="addSection()">Add Section</button>
  <button type="submit">Submit</button>
  <button type="button" (click)="resetForm()">Reset</button>
</form>
